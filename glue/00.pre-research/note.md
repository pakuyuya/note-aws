# AWS Glue とは

* サーバーレス（オンデマンド実行・実行時間課金）なETL向けサービス
* 実態は、フルマネージドなPyhton/ApacheSparkの環境を起動して、S3上のPythonスクリプトなりを実行するサービス
* ランタイムがAWS上のリソースの取得やクエリにめっちゃ強い（例：S3のデータをロード、Redshiftにクエリ、Athenaにクエリ）
* RedshiftやAthenaにテーブル作ると、自動で収集してカタログという形でメタデータを作る。めちゃ強そうだが使い方によっては危なそう

## 調べる

2019/06次点では、決定版みたいなドキュメントはなさそう

公式ドキュメント

* https://docs.aws.amazon.com/ja_jp/glue/latest/dg/what-is-glue.html

Future Tech ブログ

* https://future-architect.github.io/articles/20180828/

## ジョブについて

* [1] S3にPythonやScalaのスクリプトを置く [2] AWS GlueからJobを作成してキック の流れらしい。

* 現在、ジョブには２つのタイプがある
  * Sparkタイプ
    * 重量級で従来タイプ
    * **実行してからインスタンスの起動に1分～10分ほどかかる** （インスタンス立ち上げのため）
      * 開発エンドポイントというずっと立ち上がりっぱなし（＋課金しっぱなし）のインスタンスを別途立ちあげることはできる・・・がかなりランニングコストが高い(DPU 1 つにつき0.44$/時。
        標準の5つであれば、5 * 0.44 * 24 * = $52.8 / 日。30日で$1584。Redshiftの2TBを1つ立てられる)
    * 機能はフル
    * 多くの「Glue使ってみた」記事は、こちらの機能を使っている
  * Python Shellタイプ
    * 軽量だが読み込めるライブラリが非常に制限されている
    * 起動に20秒
    * 参照: https://dev.classmethod.jp/cloud/aws/20190129-aws-glue-python-shell/
  